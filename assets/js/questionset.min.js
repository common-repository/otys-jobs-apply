"use strict";{const e=document.querySelectorAll('[name="application-form"], [name="interactions-form"], [name="otys-login-form"], [name="otys-forgot-password-form"]'),t=e=>{e.classList.contains("current")||e.querySelectorAll("[required]").forEach((e=>{e.removeAttribute("required"),e.setAttribute("data-required",!0)})),e.classList.contains("current")&&e.querySelectorAll("[data-required]").forEach((e=>{e.removeAttribute("data-required"),e.setAttribute("required",!0)}))},r=e=>{const t=e.querySelectorAll(".rest-form-page").length,r=e.querySelectorAll(".rest-form-page.current")[0],o=parseInt(r.getAttribute("data-page"))+1,l=e.querySelectorAll(".vacancy-apply-next"),a=e.querySelectorAll(".vacancy-apply-prev"),c=e.querySelectorAll(".vacancy_apply_button");t==o?c.forEach((e=>{e.classList.remove("hide-button")})):c.forEach((e=>{e.classList.add("hide-button")})),parseInt(o+1)<=t?l.forEach((e=>{e.classList.remove("hide-button")})):l.forEach((e=>{e.classList.add("hide-button")})),o-1>0&&t>0?a.forEach((e=>{e.classList.remove("hide-button")})):a.forEach((e=>{e.classList.add("hide-button")}))},o=e=>{e.querySelectorAll(".rest-form-page").forEach(((e,r)=>{e.removeAttribute("data-page"),e.setAttribute("data-page",r),null===e.getAttribute("data-page")&&e.setAttribute("data-type","questions"),t(e)}))};e.length>0&&e.forEach((e=>{o(e),r(e);const a=e.querySelectorAll(".vacancy-apply-next"),c=e.querySelectorAll(".vacancy-apply-prev");a.forEach((o=>{o.addEventListener("click",(()=>{const o=e.querySelectorAll(".rest-form-page"),l=e.querySelectorAll(".rest-form-page.current")[0].getAttribute("data-page"),a=parseInt(parseInt(l)+1);e.reportValidity()&&(o.forEach((e=>{e.classList.remove("current")})),o[a].classList.add("current"),r(e),o[a].scrollIntoView({behavior:"smooth"}),t(o[a]),window.scrollTo({behavior:"smooth",top:o[a].getBoundingClientRect().top-document.body.getBoundingClientRect().top-80}))}))})),c.forEach((o=>{o.addEventListener("click",(()=>{const o=e.querySelectorAll(".rest-form-page"),l=e.querySelectorAll(".rest-form-page.current")[0],a=l.getAttribute("data-page"),c=parseInt(a-1);"confirm-email"===l.getAttribute("data-type")&&l.remove(),o.forEach((e=>{e.classList.remove("current"),t(e)})),o[c].classList.add("current"),t(o[c]),r(e),o[c].scrollIntoView({behavior:"smooth"}),window.scrollTo({behavior:"smooth",top:o[c].getBoundingClientRect().top-document.body.getBoundingClientRect().top-80})}))})),e.addEventListener("submit",(t=>(t.preventDefault(),l(e,t),!1)))}));const l=async e=>{let t=e.reportValidity();const l=e.getAttribute("data-identifier");e.getAttribute("data-callback")&&e.getAttribute("data-callback");if(!t)return;e.classList.add("loading"),e.querySelectorAll(".input_errors").forEach((e=>{e.innerHTML=""})),e.querySelectorAll(".rest-form-footer-errors").forEach((e=>{e.innerHTML=""})),e.querySelectorAll(".invalid").forEach((e=>{e.classList.remove("invalid")}));let a=new FormData(e);const c=await fetch(e.getAttribute("action"),{method:"POST",body:a}),n=await c.json();if(document.dispatchEvent(new CustomEvent("otys-rest-form-callback",{detail:{formData:a,response:n,status:c.status}})),200===c.status){if(void 0!==n.redirect)return void(window.location.href=n.redirect.value);if(e.classList.add("success"),e.classList.remove("loading"),"content"in document.createElement("template")){const t=e.querySelectorAll(".rest-form-pages"),r=e.querySelectorAll(".rest-form-success"),l=r.length?r[0]:null;if(l){const r=l.content.cloneNode(!0);r.querySelectorAll('.rest-form-page[data-type="success"]').forEach((e=>{e.classList.add("current")})),e.querySelectorAll(".rest-form-page").forEach((e=>{e.classList.remove("current")})),t.forEach((e=>{e.appendChild(r)})),o(e)}}}if(409===c.status){if(0===e.querySelectorAll('.rest-form-page[data-type="confirm-email"]').length&&"content"in document.createElement("template")){const t=e.querySelectorAll(".rest-form-pages"),r=e.querySelectorAll(".rest-form-confirm-email"),o=r?r[0]:null;if(o){const r=o.content.cloneNode(!0);r.querySelectorAll('.rest-form-page[data-type="confirm-email"]').forEach((e=>{e.classList.add("current")})),e.querySelectorAll(".rest-form-page").forEach((e=>{e.classList.remove("current")})),t.forEach((e=>{e.appendChild(r)}))}}}if(500===c.status){console.log(n.code);const t=e.querySelectorAll(".rest-form-footer-errors"),r=t.length?t[0]:null;if(console.log(t),console.log(r),r&&"content"in document.createElement("template")){const t=e.querySelectorAll(".input-error-template"),o=t.length?t[0]:null;if(o){let e=o.content.cloneNode(!0),t=e.querySelectorAll(".input_error");null!==t&&t.forEach((e=>{e.innerHTML=n.message})),console.log(t),r.appendChild(e),console.log(r)}}}if(!c.ok&&(400===c.status||409===c.status)){const t=Object.keys(n);let a=!1;t.forEach((t=>{const r=n[t],o=t+l,c=document.getElementById(o);let s=document.getElementById("input-errors-"+o);if(null===s){const t=e.querySelectorAll(".rest-form-footer-errors");s=t.length?t[0]:null}if(r.errors&&r.errors.length){if(s.classList.add("invalid"),c&&(c.classList.add("invalid"),!1===a&&null!==s)){let t=c.closest(".rest-form-page");if(t&&null!==t){a=!0,e.querySelectorAll(".rest-form-page").forEach((e=>{e.classList.remove("current")})),t.classList.add("current"),window.scrollTo({behavior:"smooth",top:c.getBoundingClientRect().top-document.body.getBoundingClientRect().top-80})}}r.errors.forEach((t=>{if("content"in document.createElement("template")){const r=e.querySelectorAll(".input-error-template"),o=r.length?r[0]:null;if(o){let e=o.content.cloneNode(!0),r=e.querySelectorAll(".input_error");null!==r&&r.forEach((e=>{e.innerHTML=t})),s.appendChild(e)}}}))}else c&&(c.classList.remove("invalid"),c.classList.add("valid"))})),o(e),r(e)}return grecaptcha.ready((function(){const t=e.querySelectorAll(".g-recaptcha");t.length&&t.forEach((e=>{const t=e.getAttribute("data-sitekey");grecaptcha.execute(t,{action:"submit"}).then((e=>{}))}))})),e.classList.remove("loading"),n}}